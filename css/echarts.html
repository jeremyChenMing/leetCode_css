<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>echarts</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.0.2/dist/echarts.min.js"></script>
    <style>
      *{
        margin: 0;
        padding: 0;
      }
      body{
        background-color: #000;
      }
    </style>
  </head>
  <body>
    <div>
      <div id="main" style="width: 600px; height: 600px"></div>
      <div id="toprightviewLines" style="width: 600px; height: 600px"></div>
    </div>
    <script>
      var myChart = echarts.init(document.getElementById("main"))

      var pieData = [
        {
          value: 22,
          name: "name1",
          itemStyle: {
            normal: {
              // color: 'rgba(42,42,187,1)'
              color: {
                //图形渐变颜色方法，四个数字分别代表，右，下，左，上，offset表示0%到100%
                type: "linear",
                x: 0,
                y: 0,
                x2: 0, //从左到右 0-1
                y2: 1,
                colorStops: [
                  {
                    offset: 0,
                    color: "#4b42f5", // 0% 处的颜色
                  },
                  {
                    offset: 1,
                    color: "#3540bb", // 100% 处的颜色
                  },
                ],
                globalCoord: false, // 缺省为 false
              },
            }, //正常颜色
            emphasis: {
              color: "rgba(42,42,187,0.5)",
            }, //鼠标移入颜色
          },
        },
        {
          value: 22,
          name: "name2",
          itemStyle: {
            normal: {
              color: {
                type: "linear",
                x: 0,
                y: 0,
                x2: 0, //从左到右 0-1
                y2: 1,
                colorStops: [
                  {
                    offset: 0,
                    color: "#3a48c1",
                  },
                  {
                    offset: 1,
                    color: "#4c70c2",
                  },
                ],
                globalCoord: false,
              },
            },
            emphasis: {
              color: "rgba(66,90,193,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name3",
          itemStyle: {
            normal: {
              color: "rgba(85,132,151,1)",
            },
            emphasis: {
              color: "rgba(85,132,151,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name4",
          itemStyle: {
            normal: {
              color: "rgba(87,179,180,1)",
            },
            emphasis: {
              color: "rgba(87,179,180,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name5",
          itemStyle: {
            normal: {
              color: "rgba(58,177,184,1)",
            },
            emphasis: {
              color: "rgba(58,177,184,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name6",
          itemStyle: {
            normal: {
              color: "rgba(29,173,194,1)",
            },
            emphasis: {
              color: "rgba(29,173,194,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name7",
          itemStyle: {
            normal: {
              color: "rgba(4,171,203,1)",
            },
            emphasis: {
              color: "rgba(4,171,203,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name8",
          itemStyle: {
            normal: {
              color: "rgba(3,177,203,1)",
            },
            emphasis: {
              color: "rgba(3,177,203,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name9",
          itemStyle: {
            normal: {
              color: "rgba(3,134,205,1)",
            },
            emphasis: {
              color: "rgba(3,134,205,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name10",
          itemStyle: {
            normal: {
              color: "rgba(3,102,205,1)",
            },
            emphasis: {
              color: "rgba(3,102,205,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name11",
          itemStyle: {
            normal: {
              color: "rgba(89,105,180,1)",
            },
            emphasis: {
              color: "rgba(89,105,180,0.5)",
            },
          },
        },
        {
          value: 22,
          name: "name12",
          itemStyle: {
            normal: {
              color: "rgba(68,65,198,1)",
            },
            emphasis: {
              color: "rgba(68,65,198,0.5)",
            },
          },
        },
      ]
      var option = {
        series: [
          {
            name: "动图",
            type: "pie",
            radius: ["50%", "70%"],
            itemStyle: {
              borderColor: "#0c092a", // 增加空隙，该颜色与背景色相同
              borderWidth: 5, // 空隙大小
            },
            avoidLabelOverlap: false,
            hoverAnimation: false, // 取消鼠标滑入放大的效果
            animation: false, // 取消饼图展开的效果
            label: {
              normal: {
                show: false,
              },
              emphasis: {
                show: false,
              },
            },
            labelLine: {
              normal: {
                show: false,
              },
            },
            data: pieData,
          },
        ],
      }

      myChart.setOption(option)

      // var myChartPieIndex = 0

      // var a = setInterval(function () {
      //   var dataLen = option.series[0].data.length
      //   // 取消之前高亮的图形
      //   myChart.dispatchAction({
      //     type: "downplay",
      //     seriesIndex: 0,
      //     dataIndex: myChartPieIndex,
      //   })
      //   myChartPieIndex = (myChartPieIndex + 1) % dataLen
      //   // 高亮当前图形
      //   myChart.dispatchAction({
      //     type: "highlight",
      //     seriesIndex: 0,
      //     dataIndex: myChartPieIndex,
      //   })
      // }, 200)

      // showpieLinex()

      function showpieLinex() {
        var myChartLine = echarts.init(
          document.getElementById("toprightviewLines")
        )

        var tips = 0
        var m = 0
        var mm = 1

        function loading() {
          return [
            {
              value: tips,
              itemStyle: {
                normal: {
                  color: "#5c78a7", // 走过的颜色
                },
              },
            },
            {
              value: m,
              itemStyle: {
                normal: {
                  borderWidth: 5,
                  borderColor: {
                    type: "linear",
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 4,
                    colorStops: [
                      {
                        offset: 0,
                        color: "rgba(255,255,255,0.7)", // 0% 处的颜色
                      },
                      {
                        offset: 0.3,
                        color: "rgba(255,255,255,1)", // 0% 处的颜色
                      },
                      {
                        offset: 0.6,
                        color: "rgba(255,255,255,1)", // 0% 处的颜色
                      },
                      {
                        offset: 0.8,
                        color: "rgba(255,255,255,1)", // 0% 处的颜色
                      },
                      {
                        offset: 1,
                        color: "rgba(255,255,255,1)", // 100% 处的颜色
                      },
                    ],
                    globalCoord: false,
                  },
                  color: "rgba(255,255,255,1)",
                  shadowBlur: 30,
                  shadowColor: "rgba(255,255,255,1)",
                },
              },
            },
            {
              value: 100 - tips,
              itemStyle: {
                normal: {
                  color: "#344285", // 未走的线的颜色
                },
              },
            },
          ]
        }

        setInterval(function () {
          if (tips == 100) {
            tips = 0
            m = 0
          } else if (tips <= 10) {
            ++tips
            ++m
          } else if (tips >= 90) {
            ++tips
            --m
          } else {
            ++tips
          }

          myChartLine.setOption({
            animation: false,
            animationThreshold: 100,
            animationDurationUpdate: function (idx) {
              // 越往后的数据延迟越大
              return idx * 1000
            },
            series: [
              {
                name: "loading",
                type: "pie",
                radius: ["75%", "80%"],
                center: ["50%", "50%"],
                hoverAnimation: false,
                label: {
                  normal: {
                    show: false,
                  },
                },
                data: loading(),
              },
            ],
          })
        }, 50)
      }
    </script>
  </body>
</html>
